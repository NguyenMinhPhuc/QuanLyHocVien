(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{9655:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return s(3006)}])},3006:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return SettingsIndex}});var a=s(5893),l=s(7294),r=s(6686);function SettingsIndex(){let[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(""),[n,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[p,u]=(0,l.useState)(!1);async function save(t){t.preventDefault(),u(!0);try{let t=await (0,r.SH)("/api/settings/receipts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({receipt_logo_url:e||null,receipt_center_phone:n||null,receipt_template_url:s||null})});if(!t.ok)throw Error("Failed to save settings");await t.json(),d("Saved"),setTimeout(()=>d(""),2e3)}catch(e){d("Error: "+e.message)}finally{u(!1)}}async function uploadFile(e){let s=e.target.files&&e.target.files[0];if(!s)return;let a=new FormData;a.append("file",s);try{let e=await (0,r.SH)("/api/settings/receipts/upload-logo",{method:"POST",body:a});if(!e.ok)throw Error("Upload failed");let s=await e.json();s&&s.url&&t(s.url)}catch(e){console.error(e),d("Upload error: "+e.message)}}async function uploadTemplate(e){let t=e.target.files&&e.target.files[0];if(!t)return;let s=new FormData;s.append("file",t);try{let e=await (0,r.SH)("/api/settings/receipts/upload-logo",{method:"POST",body:s});if(!e.ok)throw Error("Upload failed");let t=await e.json();t&&t.url&&i(t.url)}catch(e){console.error(e),d("Upload error: "+e.message)}}return(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,r.SH)("/api/settings/receipts");if(!e.ok)return;let s=await e.json();t(s.receipt_logo_url||""),i(s.receipt_template_url||""),o(s.receipt_center_phone||"")}catch(e){console.error(e)}})()},[]),(0,a.jsxs)("div",{className:"p-4 max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"System Settings"}),(0,a.jsx)("p",{className:"mb-4",children:"Configure system-wide settings such as receipt header/logo and contact phone."}),(0,a.jsxs)("form",{onSubmit:save,className:"grid gap-4 bg-white dark:bg-slate-800 dark:text-slate-100 p-4 rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Receipt logo URL"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"https://.../logo.png",className:"p-2 border rounded w-full bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),(0,a.jsxs)("label",{className:"p-2 bg-gray-100 border rounded cursor-pointer",children:["Upload",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:uploadFile,style:{display:"none"}})]})]}),e?(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:e,alt:"logo preview",style:{maxHeight:100}})}):(0,a.jsx)("div",{className:"mt-2 text-sm text-slate-500",children:"No logo configured"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Receipt template (background)"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{value:s,onChange:e=>i(e.target.value),placeholder:"https://.../template.png",className:"p-2 border rounded w-full bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),(0,a.jsxs)("label",{className:"p-2 bg-gray-100 border rounded cursor-pointer",children:["Upload",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:uploadTemplate,style:{display:"none"}})]})]}),s?(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:s,alt:"template preview",style:{maxHeight:120}})}):(0,a.jsx)("div",{className:"mt-2 text-sm text-slate-500",children:"No template configured"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Center phone"}),(0,a.jsx)("input",{value:n,onChange:e=>o(e.target.value),placeholder:"0123-456-789",className:"p-2 border rounded w-full bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:p,className:"px-3 py-2 bg-green-600 text-white rounded",children:p?"Saving...":"Save settings"}),c&&(0,a.jsx)("div",{className:"text-sm",children:c})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Quick links"}),(0,a.jsx)("ul",{className:"list-disc ml-6 text-sm",children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/settings/receipts",className:"text-blue-600",children:"Receipt settings page"})})})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9655)}),_N_E=e.O()}]);