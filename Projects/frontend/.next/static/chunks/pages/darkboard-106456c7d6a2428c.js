(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{9631:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/darkboard",function(){return a(4147)}])},4147:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Darkboard}});var s=a(5893),n=a(7294),r=a(6686),d=a(5951);function Darkboard(){let[t,e]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null);async function load(){l(!0);try{let t=await (0,r.SH)("/api/dashboard");if(!t.ok)throw Error("Failed to load");let a=await t.json();e(a)}catch(t){c(t.message)}finally{l(!1)}}function renderKPI(t,e,a){return(0,s.jsxs)("div",{className:"p-4 bg-gray-800/60 rounded-lg shadow-md border border-gray-700",children:[(0,s.jsx)("div",{className:"text-sm text-gray-300",children:t}),(0,s.jsx)("div",{className:"text-4xl font-extrabold text-white mt-2",children:e}),a&&(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:a})]})}return(0,n.useEffect)(()=>{load()},[]),(0,s.jsx)("div",{className:"min-h-screen p-6 bg-gradient-to-b from-gray-900 via-gray-900 to-gray-800 text-white",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:(0,d.t)("darkboard.title","Darkboard — B\xe1o c\xe1o")}),o&&(0,s.jsx)("div",{className:"text-red-400 mb-2",children:o}),a&&(0,s.jsx)("div",{className:"text-gray-300",children:(0,d.t)("actions.loading","Đang tải...")}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[renderKPI((0,d.t)("dashboard.total_students","Tổng học vi\xean"),t.totalStudents,(0,d.t)("dashboard.students_label","Tổng học vi\xean")),renderKPI((0,d.t)("dashboard.total_teachers","Tổng gi\xe1o vi\xean"),t.totalTeachers),renderKPI((0,d.t)("dashboard.total_classes","Tổng lớp"),t.totalClasses,"".concat((0,d.t)("dashboard.active","Hoạt động"),": ").concat(t.activeClasses)),renderKPI((0,d.t)("dashboard.schedules","Lịch (sắp tới)"),t.upcomingSessions,"".concat((0,d.t)("dashboard.total_schedules","Tổng lịch"),": ").concat(t.totalSchedules))]}),(0,s.jsxs)("div",{className:"mt-8 p-6 bg-gray-800/60 rounded-lg border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:(0,d.t)("dashboard.top_classes","Lớp đ\xf4ng nhất")}),(0,s.jsx)(function(t){let{items:e}=t;if(!e||0===e.length)return(0,s.jsx)("div",{className:"text-gray-300",children:(0,d.t)("dashboard.no_data","Kh\xf4ng c\xf3 dữ liệu")});let a=Math.max(...e.map(t=>t.student_count||0),1);return(0,s.jsx)("div",{className:"mt-4 overflow-auto",children:(0,s.jsx)("svg",{width:Math.min(600,220*e.length),height:48*e.length,viewBox:"0 0 ".concat(Math.min(600,220*e.length)," ").concat(48*e.length),children:e.map((t,e)=>{let n=Math.round((t.student_count||0)/a*400);return(0,s.jsxs)("g",{transform:"translate(0, ".concat(48*e+6,")"),children:[(0,s.jsx)("text",{x:8,y:18,fill:"#e5e7eb",fontSize:"12",children:t.course_name||"Class "+t.id}),(0,s.jsx)("rect",{x:200,y:2,rx:6,ry:6,width:Math.max(8,n),height:36,fill:"#60a5fa"}),(0,s.jsx)("text",{x:200+Math.max(8,n)+8,y:18,fill:"#d1d5db",fontSize:"12",children:t.student_count||0}),(0,s.jsx)("text",{x:8,y:36,fill:"#9ca3af",fontSize:"10",children:t.teacher_name||""})]},t.id)})})})},{items:t.topClasses})]})]})]})})}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=9631)}),_N_E=t.O()}]);