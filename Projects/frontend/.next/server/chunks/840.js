exports.id=840,exports.ids=[840],exports.modules={6686:(e,s,a)=>{"use strict";async function authFetch(e,s={}){let a=s.headers||{},l="undefined"!=typeof process&&process.env?"http://localhost:4000":null,n=l?String(l).replace(/\/$/,""):"http://localhost:4000",r=e;try{"string"==typeof e&&e.startsWith("/api")&&(r=n+e)}catch(s){r=e}let c=await fetch(r,{...s,headers:a,credentials:"include"});if(401===c.status)try{let e=await fetch(n+"/api/auth/refresh",{method:"POST",credentials:"include"});if(e.ok)return fetch(r,{...s,headers:a,credentials:"include"})}catch(e){}return c}async function logout(){let e="undefined"!=typeof process&&process.env?"http://localhost:4000".replace(/\/$/,""):"http://localhost:4000";await fetch(e+"/api/auth/logout",{method:"POST",credentials:"include"})}function getToken(){return null}a.d(s,{LP:()=>getToken,SH:()=>authFetch,kS:()=>logout})},5951:(e,s,a)=>{"use strict";a.d(s,{t:()=>t});let l=JSON.parse('{"app.title":"Quản l\xfd học vi\xean","sidebar.courses":"Kh\xf3a học","sidebar.teachers":"Gi\xe1o vi\xean","sidebar.classes":"Lớp học","sidebar.attendance":"Điểm danh","sidebar.debts":"Quản l\xfd c\xf4ng nợ","sidebar.schedules":"Lịch","debts.title":"Quản l\xfd c\xf4ng nợ","debts.search.placeholder":"T\xecm kiếm t\xean hoặc sđt","debts.minOutstanding":"Min nợ","debts.maxOutstanding":"Max nợ","debts.filter.any":"Tất cả","debts.filter.with":"C\xf3 nợ","debts.filter.without":"Kh\xf4ng nợ","debts.actions.pay":"Thanh to\xe1n","debts.table.no":"STT","debts.table.name":"Họ t\xean","debts.table.phone":"SĐT","debts.table.active":"Lớp đang học","debts.table.finished":"Lớp đ\xe3 kết th\xfac","debts.table.total_owed":"Tổng nợ","debts.table.total_paid":"Đ\xe3 thanh to\xe1n","debts.table.remaining":"C\xf2n lại","actions.close":"Đ\xf3ng","actions.cancel":"Hủy","actions.confirm":"X\xe1c nhận","pay.method.cash":"Tiền mặt","pay.method.transfer":"Chuyển khoản","pay.invalid_amount":"Số tiền kh\xf4ng hợp lệ","header.search.placeholder":"T\xecm theo m\xe3, t\xean...","header.menu.profile":"Hồ sơ","header.menu.settings":"C\xe0i đặt","header.menu.logout":"Đăng xuất","login.title":"Đăng nhập","login.username":"T\xean đăng nhập","login.password":"Mật khẩu","login.submit":"Đăng nhập","login.processing":"Đang xử l\xfd...","login.error.missing":"Vui l\xf2ng nhập t\xean đăng nhập v\xe0 mật khẩu","register.title":"Đăng k\xfd (Admin)","register.username":"T\xean đăng nhập","register.password":"Mật khẩu","register.role":"Vai tr\xf2","register.submit":"Đăng k\xfd","roles.student":"Học vi\xean","roles.parent":"Phụ huynh","roles.teacher":"Gi\xe1o vi\xean","roles.admin":"Quản trị vi\xean","sidebar.dashboard":"Bảng điều khiển","sidebar.students":"Học vi\xean","schedules.title":"Quản l\xfd lịch","schedules.create":"Tạo lịch","schedules.create_title":"Tạo lịch mới","schedules.edit_title":"Sửa lịch","schedules.col.class":"Lớp","schedules.col.weekday":"Thứ","schedules.col.start":"Bắt đầu","schedules.col.end":"Kết th\xfac","schedules.form.class":"Lớp","schedules.form.select_class":"-- Chọn lớp --","schedules.form.weekday":"Thứ (0=CN,1=Thứ 2)","schedules.form.weekdays":"Chọn ng\xe0y lặp lại","schedules.weekday.0":"Chủ nhật","schedules.weekday.1":"Thứ 2","schedules.weekday.2":"Thứ 3","schedules.weekday.3":"Thứ 4","schedules.weekday.4":"Thứ 5","schedules.weekday.5":"Thứ 6","schedules.weekday.6":"Thứ 7","schedules.form.start_time":"Bắt đầu","schedules.form.end_time":"Kết th\xfac","schedules.transfer.none":"Kh\xf4ng t\xecm thấy lớp","schedules.search.placeholder":"T\xecm lớp, kh\xf3a học, gi\xe1o vi\xean...","schedules.no_classes":"Chưa c\xf3 lớp n\xe0o. Vui l\xf2ng tạo lớp trước khi th\xeam lịch.","schedules.col.date":"Ng\xe0y","schedules.pagination.total":"Tổng","pagination.first":"Đầu","pagination.prev":"Trước","pagination.next":"Sau","pagination.last":"Cuối","students.title":"Học vi\xean","students.actions.add":"Th\xeam học vi\xean","students.search.placeholder":"T\xecm theo t\xean/email/sđt","students.parents.title":"Phụ huynh / Người gi\xe1m hộ","students.parents.relationship":"Quan hệ","students.parents.father":"Cha","students.parents.mother":"Mẹ","students.parents.guardian":"Người gi\xe1m hộ","students.parents.other":"Kh\xe1c","students.parents.confirm_delete":"X\xe1c nhận x\xf3a phụ huynh? T\xe0i khoản phụ huynh sẽ bị v\xf4 hiệu h\xf3a.","students.parents.add":"Th\xeam phụ huynh","students.filter.all":"Tất cả trạng th\xe1i","students.status.active":"Hoạt động","students.status.inactive":"Kh\xf4ng hoạt động","students.status.disabled":"V\xf4 hiệu","students.table.no":"STT","students.table.name":"Họ t\xean","students.table.email":"Email","students.table.phone":"SĐT","students.table.dob":"Ng\xe0y sinh","students.table.status":"Trạng th\xe1i","students.table.actions":"H\xe0nh động","actions.create":"Tạo","actions.update":"Cập nhật","courses.title":"Kh\xf3a học","courses.add":"Th\xeam kh\xf3a học","courses.edit_title":"Sửa kh\xf3a học","courses.add_title":"Th\xeam kh\xf3a học","courses.field.name":"T\xean kh\xf3a học","courses.field.level":"Tr\xecnh độ","courses.field.sessions":"Số buổi","courses.field.tuition":"Học ph\xed","courses.field.discount":"Giảm gi\xe1 %","courses.field.status":"Trạng th\xe1i","courses.field.description":"M\xf4 tả","courses.search.placeholder":"T\xecm kiếm t\xean/m\xf4 tả","courses.sort.name":"Sắp theo t\xean","courses.sort.level":"Sắp theo tr\xecnh độ","sort.asc":"Tăng dần","sort.desc":"Giảm dần","courses.filter.all":"Tất cả trạng th\xe1i","status.active":"Hoạt động","status.inactive":"Kh\xf4ng hoạt động","status.disabled":"V\xf4 hiệu","courses.rows":"Số h\xe0ng:","courses.table.no":"STT","courses.table.name":"T\xean","courses.table.description":"M\xf4 tả","courses.table.level":"Tr\xecnh độ","courses.table.sessions":"Số buổi","courses.table.tuition":"Học ph\xed","courses.table.discount":"Giảm %","courses.table.status":"Trạng th\xe1i","courses.table.actions":"H\xe0nh động","courses.create_class":"Tạo lớp","classes.create_for_course":"Tạo lớp cho kh\xf3a học","classes.field.teacher":"Gi\xe1o vi\xean","classes.field.room":"Ph\xf2ng","classes.field.schedule":"Lịch","classes.field.status":"Trạng th\xe1i","classes.title":"Lớp học","classes.new_title":"Lớp mới","classes.new":"Tạo","classes.search_placeholder":"T\xecm kiếm lớp, kh\xf3a học, gi\xe1o vi\xean...","classes.filter_all":"Tất cả trạng th\xe1i","classes.filter_active":"Hoạt động","classes.filter_inactive":"Kh\xf4ng hoạt động","classes.col_no":"STT","classes.col_course":"Kh\xf3a học","classes.col_students":"Học vi\xean","classes.col_reserved":"Đặt chỗ","classes.col_teachers":"Gi\xe1o vi\xean","classes.col_room":"Ph\xf2ng","classes.col_schedule":"Lịch","classes.col_reg_open":"Mở đăng k\xfd","classes.col_start":"Bắt đầu","classes.col_status":"Trạng th\xe1i","classes.col_actions":"H\xe0nh động","classes.status_active":"Hoạt động","classes.status_inactive":"Kh\xf4ng hoạt động","classes.action_manage":"Quản l\xfd","classes.action_view":"Xem","classes.action_edit":"Sửa","classes.action_delete":"X\xf3a","classes.details_title":"Chi tiết lớp","classes.field_course_label":"Kh\xf3a học","classes.field_teachers_label":"Gi\xe1o vi\xean","classes.field_room_label":"Ph\xf2ng","classes.field_schedule_label":"Lịch","classes.field_reg_open_label":"Mở đăng k\xfd","classes.field_reg_close_label":"Đ\xf3ng đăng k\xfd","classes.field_start_label":"Bắt đầu","classes.field_end_label":"Kết th\xfac","classes.enrolled_students":"Học vi\xean đ\xe3 đăng k\xfd","classes.add_student":"Th\xeam học vi\xean","classes.col_name":"Họ t\xean","classes.col_phone":"SĐT","classes.col_email":"Email","classes.remove_student":"Gỡ học vi\xean","classes.assigned_teachers":"Gi\xe1o vi\xean phụ tr\xe1ch","classes.add_teacher":"Th\xeam gi\xe1o vi\xean","classes.remove_teacher":"Gỡ gi\xe1o vi\xean","classes.edit_title":"Sửa lớp","classes.create_title":"Tạo lớp mới","classes.field_course":"Kh\xf3a học","classes.field_teacher":"Gi\xe1o vi\xean ch\xednh (kh\xf4ng bắt buộc)","classes.field_start_time":"Giờ bắt đầu","classes.field_end_time":"Giờ kết th\xfac","classes.field_reg_open":"Mở đăng k\xfd","classes.field_reg_close":"Đ\xf3ng đăng k\xfd","classes.field_course_start":"Ng\xe0y bắt đầu kh\xf3a","classes.field_course_end":"Ng\xe0y kết th\xfac kh\xf3a","classes.showing_prefix":"Hiển thị","classes.showing_of":"của","classes.confirm_remove_student":"X\xe1c nhận gỡ học vi\xean khỏi lớp?","classes.confirm_remove_teacher":"X\xe1c nhận gỡ gi\xe1o vi\xean khỏi lớp?","classes.search_student_placeholder":"T\xecm hoặc chọn học vi\xean...","classes.no_results":"Kh\xf4ng c\xf3 kết quả","classes.or_create_new_student":"Hoặc tạo học vi\xean mới","classes.input_name":"Họ t\xean","classes.input_email":"Email","classes.input_phone":"SĐT","classes.add":"Th\xeam","classes.search_teacher_placeholder":"T\xecm hoặc chọn gi\xe1o vi\xean...","classes.assign":"G\xe1n","actions.edit":"Sửa","actions.delete":"X\xf3a","loading":"Đang tải...","teachers.title":"Gi\xe1o vi\xean","teachers.add":"Th\xeam gi\xe1o vi\xean","teachers.add_title":"Th\xeam gi\xe1o vi\xean","teachers.edit_title":"Sửa gi\xe1o vi\xean","teachers.field.name":"Họ t\xean","teachers.field.phone":"SĐT","teachers.field.email":"Email","teachers.field.status":"Trạng th\xe1i","teachers.search.placeholder":"T\xecm theo t\xean/email/sđt","teachers.sort.name":"Sắp theo t\xean","teachers.sort.email":"Sắp theo email","teachers.sort.phone":"Sắp theo sđt","teachers.filter.all":"Tất cả trạng th\xe1i","teachers.rows":"Số h\xe0ng:","teachers.table.no":"STT","teachers.table.name":"Họ t\xean","teachers.table.phone":"SĐT","teachers.table.email":"Email","teachers.table.status":"Trạng th\xe1i","teachers.table.actions":"H\xe0nh động"}');function t(e,s){if(!e)return"";let a=l[e];return void 0===a?s||e:a}},840:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_app});var l=a(997),n=a(6689),r=a(1664),c=a.n(r),i=a(6893),o=a(5951);function Sidebar({collapsed:e,user:s}){return(0,l.jsxs)("aside",{className:`${e?"w-16":"w-60"} bg-white dark:bg-slate-800 border-r h-full transition-width duration-150 flex-shrink-0`,children:[(0,l.jsxs)("div",{className:"p-3 flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded bg-blue-600 flex items-center justify-center text-white",children:"CM"}),!e&&l.jsx("div",{className:"font-semibold text-lg",children:(0,o.t)("app.title","CenterMgmt")})]}),(0,l.jsxs)("nav",{className:"mt-4 px-2 flex flex-col gap-1",children:[(0,l.jsxs)(c(),{href:"/dashboard",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.m6D,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.dashboard","Dashboard")})]}),(0,l.jsxs)(c(),{href:"/",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.WY8,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.students","Students")})]}),(0,l.jsxs)(c(),{href:"/courses",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.yK7,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.courses","Courses")})]}),(0,l.jsxs)(c(),{href:"/teachers",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.tMu,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.teachers","Teachers")})]}),(0,l.jsxs)(c(),{href:"/classes",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.yG,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.classes","Classes")})]}),(0,l.jsxs)(c(),{href:"/attendance",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.TCC,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.attendance","Attendance")})]}),(0,l.jsxs)(c(),{href:"/debts",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.WY8,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.debts","Quản l\xfd c\xf4ng nợ")})]}),(0,l.jsxs)(c(),{href:"/schedules",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[l.jsx(i.vlc,{className:"text-lg"}),!e&&l.jsx("span",{children:(0,o.t)("sidebar.schedules","Schedules")})]})]})]})}var d=a(6686),h=a(1163);function SearchModal({open:e,onClose:s}){let a;let r=(0,h.useRouter)(),[c,o]=(0,n.useState)(""),[x,u]=(0,n.useState)(!1),[m,f]=(0,n.useState)([]),[g,p]=(0,n.useState)(0),b=(0,n.useRef)();(0,n.useEffect)(()=>{e&&(o(""),f([]),p(0),setTimeout(()=>b.current&&b.current.focus(),50))},[e]),(0,n.useEffect)(()=>{if(e){if(!c||c.trim().length<1){f([]);return}u(!0),debouncedSearch(c)}},[c,e]);let performSearch=async e=>{try{let s=await (0,d.SH)(`/api/search?q=${encodeURIComponent(e)}`);if(!s.ok){f([]);return}let a=await s.json(),l=a&&a.results?a.results:[];f([{type:"action",label:"Tạo học vi\xean mới",href:"/students/new"},{type:"action",label:"Tạo lớp mới",href:"/classes/new"},...l])}catch(e){f([])}finally{u(!1)}},debouncedSearch=(...e)=>{clearTimeout(a),a=setTimeout(()=>performSearch(...e),300)};function activate(e){if(!e)return;if("action"===e.type){s(),r.push(e.href);return}let a=e.id||e.item&&(e.item.id||e.item.class_id||e.item.user_id||e.item.receipt_id);a&&(s(),"classes"===e.type?r.push(`/class-students/${a}`):"courses"===e.type?r.push(`/courses/${a}`):"students"===e.type?r.push(`/debts?student=${a}`):"teachers"===e.type?r.push(`/teachers?focus=${a}`):"receipts"===e.type&&r.push(`/receipts/${a}`))}return e?(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4",children:[l.jsx("div",{onClick:s,className:"absolute inset-0 bg-black/40"}),(0,l.jsxs)("div",{className:"relative w-full max-w-2xl bg-white dark:bg-slate-800 rounded shadow-lg mt-20",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 p-3 border-b border-gray-100 dark:border-slate-700",children:[l.jsx(i.jRj,{className:"text-gray-500 dark:text-gray-300"}),l.jsx("input",{ref:b,value:c,onChange:e=>o(e.target.value),onKeyDown:function(e){m&&0!==m.length&&("ArrowDown"===e.key?(e.preventDefault(),p(e=>Math.min(m.length-1,e+1))):"ArrowUp"===e.key?(e.preventDefault(),p(e=>Math.max(0,e-1))):"Enter"===e.key?(e.preventDefault(),activate(m[g])):"Escape"===e.key&&s())},placeholder:"T\xecm kiếm to\xe0n bộ hệ thống...",className:"flex-1 bg-transparent outline-none text-sm text-slate-800 dark:text-slate-100"}),l.jsx("button",{onClick:()=>{o(""),b.current&&b.current.focus()},className:"p-1 text-gray-500",children:l.jsx(i.q5L,{})})]}),(0,l.jsxs)("div",{className:"max-h-80 overflow-auto",children:[x&&l.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Đang t\xecm..."}),!x&&m&&0===m.length&&l.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Kh\xf4ng c\xf3 kết quả"}),l.jsx("ul",{children:m.map((e,s)=>(0,l.jsxs)("li",{onMouseEnter:()=>p(s),onClick:()=>activate(e),className:`p-3 cursor-pointer flex items-center justify-between ${g===s?"bg-gray-100 dark:bg-slate-700":"hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:[l.jsx("div",{children:"action"===e.type?l.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:e.label}):(0,l.jsxs)("div",{children:[l.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:e.label||e.item&&(e.item.name||e.item.title||e.item.username||e.item.fullname||e.item.class_name)}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-300",children:function(e){let s=e.meta||e.item&&e.item.meta||{};if("teachers"===e.type){let e=null!=s.class_count?`Lớp: ${s.class_count}`:null,a=null!=s.student_count?`HV: ${s.student_count}`:null,l=s.phone||s.email?`${s.phone||""} ${s.email||""}`.trim():null;return[e,a,l].filter(Boolean).join(" \xb7 ")}if("students"===e.type){let e=null!=s.class_count?`Lớp: ${s.class_count}`:null,a=null!=s.debt_total?`Nợ: ${Number(s.debt_total).toLocaleString()}`:null,l=s.phone||s.email?`${s.phone||""} ${s.email||""}`.trim():null;return[e,a,l].filter(Boolean).join(" \xb7 ")}if("classes"===e.type){let e=null!=s.student_count?`HV: ${s.student_count}`:null,a=s.course_id?`Course ${s.course_id}`:null;return[e,a].filter(Boolean).join(" \xb7 ")}if("courses"===e.type){let e=null!=s.class_count?`Lớp: ${s.class_count}`:null,a=null!=s.student_count?`HV: ${s.student_count}`:null;return[e,a].filter(Boolean).join(" \xb7 ")}return e.type}(e)})]})}),l.jsx("div",{className:"text-xs text-slate-400",children:"action"!==e.type&&(e.id||e.item&&(e.item.id||e.item.class_id||e.item.user_id||e.item.receipt_id))})]},s))})]})]})]}):null}function Header({onToggleSidebar:e,collapsed:s,user:a,theme:r,onToggleTheme:c}){let[h,x]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),p=(0,n.useRef)(),[b,v]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{function onDoc(e){p.current&&!p.current.contains(e.target)&&g(!1)}return document.addEventListener("click",onDoc),()=>document.removeEventListener("click",onDoc)},[]),(0,n.useEffect)(()=>{function onKey(e){(e.ctrlKey||e.metaKey)&&"k"===e.key.toLowerCase()&&(e.preventDefault(),m(!0))}return document.addEventListener("keydown",onKey),()=>document.removeEventListener("keydown",onKey)},[]),(0,n.useEffect)(()=>{v(!0)},[]),(0,l.jsxs)("header",{className:"h-16 flex items-center justify-between px-4 bg-white dark:bg-slate-900 border-b",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:l.jsx(i.cur,{})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-slate-800 px-3 py-2 rounded cursor-text",onClick:()=>m(!0),children:[l.jsx(i.jRj,{className:"text-gray-500 dark:text-gray-300"}),l.jsx("input",{readOnly:!0,onFocus:()=>m(!0),className:"bg-transparent outline-none w-64 text-sm dark:text-white cursor-text",placeholder:(0,o.t)("header.search.placeholder","T\xecm theo m\xe3, t\xean... (Ctrl+K)"),value:h})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[a&&"admin"===a.role&&l.jsx("a",{href:"/darkboard",className:"text-sm px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:(0,o.t)("darkboard.link","Darkboard")}),l.jsx("button",{onClick:c,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:b?"dark"===r?l.jsx(i.wOW,{}):l.jsx(i.kXG,{}):l.jsx("span",{style:{display:"inline-block",width:20,height:20}})}),(0,l.jsxs)("div",{className:"relative avatar-menu",ref:p,children:[(0,l.jsxs)("div",{onClick:()=>g(e=>!e),className:"flex items-center gap-2 cursor-pointer px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:[l.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-500 text-white flex items-center justify-center",children:a&&(a.username||a.name)?(a.username||a.name).charAt(0).toUpperCase():l.jsx(i.fzv,{})}),a&&(a.name||a.username)&&(0,l.jsxs)("div",{className:"block max-w-[160px] truncate text-sm text-slate-800 dark:text-slate-100",children:[a.name||a.username," - ",(0,o.t)(`roles.${(a.role||"").toString().toLowerCase()}`,a.role||"")]})]}),f&&(0,l.jsxs)("div",{className:"menu",children:[a&&(0,l.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100 dark:border-slate-700 text-sm text-slate-800 dark:text-slate-100",children:[l.jsx("div",{className:"font-medium",children:a.name||a.username}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-300",children:(0,o.t)(`roles.${(a.role||"").toString().toLowerCase()}`,a.role||"")})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[l.jsx("button",{onClick:()=>{g(!1),window.location.href="/profile"},className:"px-3 py-2 text-left",children:(0,o.t)("header.menu.profile","Profile")}),l.jsx("button",{onClick:()=>{g(!1),window.location.href="/settings"},className:"px-3 py-2 text-left",children:(0,o.t)("header.menu.settings","Settings")}),l.jsx("button",{onClick:async()=>{await (0,d.kS)(),window.location.href="/login"},className:"px-3 py-2 text-left",children:(0,o.t)("header.menu.logout","Logout")})]})]})]})]}),l.jsx(SearchModal,{open:u,onClose:()=>m(!1)})]})}function Footer(){return l.jsx("footer",{className:"w-full bg-white dark:bg-slate-800 border-t border-gray-100 dark:border-slate-700 p-3 text-center text-sm text-slate-600 dark:text-slate-300",children:"Copyright @2026 - Khoa C\xf4ng nghệ th\xf4ng tin - Trường Đại học Lạc Hồng"})}function Layout({children:e}){let[s,a]=(0,n.useState)(!1),[r,c]=(0,n.useState)(null),[i,o]=(0,n.useState)(()=>"light");return(0,n.useEffect)(()=>{(0,d.SH)("/api/me").then(e=>e.ok?e.json():null).then(c).catch(()=>{})},[]),(0,l.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-slate-900",children:[l.jsx(Sidebar,{collapsed:s,user:r}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col",children:[l.jsx(Header,{onToggleSidebar:()=>a(e=>!e),collapsed:s,user:r,theme:i,onToggleTheme:function(){let e="dark"===i?"light":"dark";o(e);try{localStorage.setItem("theme",e)}catch(e){}"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}),l.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e}),l.jsx(Footer,{})]})]})}a(6764);let _app=function({Component:e,pageProps:s}){let a=(0,h.useRouter)(),n="/login"===a.pathname||"/register"===a.pathname;return n?l.jsx(e,{...s}):l.jsx(Layout,{children:l.jsx(e,{...s})})}},6764:()=>{}};