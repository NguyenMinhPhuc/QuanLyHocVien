exports.id=181,exports.ids=[181],exports.modules={6686:(e,s,a)=>{"use strict";function authFetch(e,s={}){let a=s.headers||{},n="undefined"!=typeof process&&process.env?"http://localhost:4000":null,r=n?String(n).replace(/\/$/,""):"http://localhost:4000",l=e;try{"string"==typeof e&&e.startsWith("/api")&&(l=r+e)}catch(s){l=e}return fetch(l,{...s,headers:a,credentials:"include"})}async function logout(){let e="undefined"!=typeof process&&process.env?"http://localhost:4000".replace(/\/$/,""):"http://localhost:4000";await fetch(e+"/api/auth/logout",{method:"POST",credentials:"include"})}a.d(s,{S:()=>authFetch,k:()=>logout})},5951:(e,s,a)=>{"use strict";a.d(s,{t:()=>t});let n=JSON.parse('{"app.title":"Hệ thống quản l\xfd học vi\xean","sidebar.courses":"Kh\xf3a học","sidebar.teachers":"Gi\xe1o vi\xean","sidebar.classes":"Lớp học","sidebar.debts":"Quản l\xfd c\xf4ng nợ","sidebar.schedules":"Lịch","debts.title":"Quản l\xfd c\xf4ng nợ","debts.search.placeholder":"T\xecm kiếm t\xean hoặc sđt","debts.minOutstanding":"Min nợ","debts.maxOutstanding":"Max nợ","debts.filter.any":"Tất cả","debts.filter.with":"C\xf3 nợ","debts.filter.without":"Kh\xf4ng nợ","debts.actions.pay":"Thanh to\xe1n","debts.table.no":"STT","debts.table.name":"Họ t\xean","debts.table.phone":"SĐT","debts.table.active":"Lớp đang học","debts.table.finished":"Lớp đ\xe3 kết th\xfac","debts.table.total_owed":"Tổng nợ","debts.table.total_paid":"Đ\xe3 thanh to\xe1n","debts.table.remaining":"C\xf2n lại","actions.close":"Đ\xf3ng","actions.cancel":"Hủy","actions.confirm":"X\xe1c nhận","pay.method.cash":"Tiền mặt","pay.method.transfer":"Chuyển khoản","pay.invalid_amount":"Số tiền kh\xf4ng hợp lệ","header.search.placeholder":"T\xecm theo m\xe3, t\xean...","header.menu.profile":"Hồ sơ","header.menu.settings":"C\xe0i đặt","header.menu.logout":"Đăng xuất","login.title":"Đăng nhập","login.username":"T\xean đăng nhập","login.password":"Mật khẩu","login.submit":"Đăng nhập","login.processing":"Đang xử l\xfd...","login.error.missing":"Vui l\xf2ng nhập t\xean đăng nhập v\xe0 mật khẩu","register.title":"Đăng k\xfd (Admin)","register.username":"T\xean đăng nhập","register.password":"Mật khẩu","register.role":"Vai tr\xf2","register.submit":"Đăng k\xfd","roles.student":"Học vi\xean","roles.parent":"Phụ huynh","roles.teacher":"Gi\xe1o vi\xean","roles.admin":"Quản trị vi\xean","sidebar.dashboard":"Bảng điều khiển","sidebar.students":"Học vi\xean","schedules.title":"Quản l\xfd lịch","schedules.create":"Tạo lịch","schedules.create_title":"Tạo lịch mới","schedules.edit_title":"Sửa lịch","schedules.col.class":"Lớp","schedules.col.weekday":"Thứ","schedules.col.start":"Bắt đầu","schedules.col.end":"Kết th\xfac","schedules.form.class":"Lớp","schedules.form.select_class":"-- Chọn lớp --","schedules.form.weekday":"Thứ (0=CN,1=Thứ 2)","schedules.form.weekdays":"Chọn ng\xe0y lặp lại","schedules.weekday.0":"Chủ nhật","schedules.weekday.1":"Thứ 2","schedules.weekday.2":"Thứ 3","schedules.weekday.3":"Thứ 4","schedules.weekday.4":"Thứ 5","schedules.weekday.5":"Thứ 6","schedules.weekday.6":"Thứ 7","schedules.form.start_time":"Bắt đầu","schedules.form.end_time":"Kết th\xfac","schedules.transfer.none":"Kh\xf4ng t\xecm thấy lớp","schedules.search.placeholder":"T\xecm lớp, kh\xf3a học, gi\xe1o vi\xean...","schedules.no_classes":"Chưa c\xf3 lớp n\xe0o. Vui l\xf2ng tạo lớp trước khi th\xeam lịch.","schedules.col.date":"Ng\xe0y","schedules.pagination.total":"Tổng","pagination.first":"Đầu","pagination.prev":"Trước","pagination.next":"Sau","pagination.last":"Cuối"}');function t(e,s){if(!e)return"";let a=n[e];return void 0===a?s||e:a}},181:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_app});var n=a(997),r=a(6689),l=a(1664),d=a.n(l),c=a(6893),i=a(5951);function Sidebar({collapsed:e,user:s}){return(0,n.jsxs)("aside",{className:`${e?"w-16":"w-60"} bg-white dark:bg-slate-800 border-r h-full transition-width duration-150 flex-shrink-0`,children:[(0,n.jsxs)("div",{className:"p-3 flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded bg-blue-600 flex items-center justify-center text-white",children:"CM"}),!e&&n.jsx("div",{className:"font-semibold text-lg",children:(0,i.t)("app.title","CenterMgmt")})]}),(0,n.jsxs)("nav",{className:"mt-4 px-2 flex flex-col gap-1",children:[(0,n.jsxs)(d(),{href:"/dashboard",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.m6D,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.dashboard","Dashboard")})]}),(0,n.jsxs)(d(),{href:"/",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.WY8,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.students","Students")})]}),(0,n.jsxs)(d(),{href:"/courses",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.yK7,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.courses","Courses")})]}),(0,n.jsxs)(d(),{href:"/teachers",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.tMu,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.teachers","Teachers")})]}),(0,n.jsxs)(d(),{href:"/classes",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.yG,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.classes","Classes")})]}),(0,n.jsxs)(d(),{href:"/debts",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.WY8,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.debts","Quản l\xfd c\xf4ng nợ")})]}),(0,n.jsxs)(d(),{href:"/schedules",className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-100",children:[n.jsx(c.vlc,{className:"text-lg"}),!e&&n.jsx("span",{children:(0,i.t)("sidebar.schedules","Schedules")})]})]})]})}var h=a(6686);function Header({onToggleSidebar:e,collapsed:s,user:a,theme:l,onToggleTheme:d}){let[o,x]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),m=(0,r.useRef)(),[p,f]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{function onDoc(e){m.current&&!m.current.contains(e.target)&&g(!1)}return document.addEventListener("click",onDoc),()=>document.removeEventListener("click",onDoc)},[]),(0,r.useEffect)(()=>{f(!0)},[]),(0,n.jsxs)("header",{className:"h-16 flex items-center justify-between px-4 bg-white dark:bg-slate-900 border-b",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:s?"☰":"▢"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-slate-800 px-3 py-2 rounded",children:[n.jsx(c.jRj,{className:"text-gray-500 dark:text-gray-300"}),n.jsx("input",{className:"bg-transparent outline-none w-64 text-sm dark:text-white",placeholder:(0,i.t)("header.search.placeholder","T\xecm theo m\xe3, t\xean..."),value:o,onChange:e=>x(e.target.value)})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[a&&"admin"===a.role&&n.jsx("a",{href:"/darkboard",className:"text-sm px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:(0,i.t)("darkboard.link","Darkboard")}),n.jsx("button",{onClick:d,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-slate-800",children:p?"dark"===l?n.jsx(c.wOW,{}):n.jsx(c.kXG,{}):n.jsx("span",{style:{display:"inline-block",width:20,height:20}})}),(0,n.jsxs)("div",{className:"relative avatar-menu",ref:m,children:[n.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-500 text-white flex items-center justify-center cursor-pointer",onClick:()=>g(e=>!e),children:a&&a.username?a.username.charAt(0).toUpperCase():n.jsx(c.fzv,{})}),u&&(0,n.jsxs)("div",{className:"menu",children:[n.jsx("button",{onClick:()=>{g(!1),window.location.href="/profile"},children:(0,i.t)("header.menu.profile","Profile")}),n.jsx("button",{onClick:()=>{g(!1),window.location.href="/settings"},children:(0,i.t)("header.menu.settings","Settings")}),n.jsx("button",{onClick:async()=>{await (0,h.k)(),window.location.href="/login"},children:(0,i.t)("header.menu.logout","Logout")})]})]})]})]})}function Layout({children:e}){let[s,a]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),[c,i]=(0,r.useState)(()=>"light");return(0,r.useEffect)(()=>{(0,h.S)("/api/me").then(e=>e.ok?e.json():null).then(d).catch(()=>{})},[]),(0,n.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-slate-900",children:[n.jsx(Sidebar,{collapsed:s,user:l}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[n.jsx(Header,{onToggleSidebar:()=>a(e=>!e),collapsed:s,user:l,theme:c,onToggleTheme:function(){let e="dark"===c?"light":"dark";i(e);try{localStorage.setItem("theme",e)}catch(e){}"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}),n.jsx("main",{className:"p-6 overflow-auto",children:e})]})]})}a(6764);var o=a(1163);let _app=function({Component:e,pageProps:s}){let a=(0,o.useRouter)(),r="/login"===a.pathname||"/register"===a.pathname;return r?n.jsx(e,{...s}):n.jsx(Layout,{children:n.jsx(e,{...s})})}},6764:()=>{}};