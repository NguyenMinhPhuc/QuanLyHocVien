"use strict";(()=>{var e={};e.id=662,e.ids=[662,888,660],e.modules={8884:(e,t,s)=>{s.r(t),s.d(t,{config:()=>f,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>g,reportWebVitals:()=>b,routeModule:()=>N,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>j});var a={};s.r(a),s.d(a,{default:()=>SettingsIndex});var r=s(7093),l=s(5244),i=s(1323),n=s(9209),o=s.n(n),c=s(181),d=s(997),p=s(6689),u=s(6686);function SettingsIndex(){let[e,t]=(0,p.useState)(""),[s,a]=(0,p.useState)(""),[r,l]=(0,p.useState)(""),[i,n]=(0,p.useState)(""),[o,c]=(0,p.useState)(!1);async function save(t){t.preventDefault(),c(!0);try{let t=await (0,u.S)("/api/settings/receipts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({receipt_logo_url:e||null,receipt_center_phone:r||null,receipt_template_url:s||null})});if(!t.ok)throw Error("Failed to save settings");await t.json(),n("Saved"),setTimeout(()=>n(""),2e3)}catch(e){n("Error: "+e.message)}finally{c(!1)}}async function uploadFile(e){let s=e.target.files&&e.target.files[0];if(!s)return;let a=new FormData;a.append("file",s);try{let e=await (0,u.S)("/api/settings/receipts/upload-logo",{method:"POST",body:a});if(!e.ok)throw Error("Upload failed");let s=await e.json();s&&s.url&&t(s.url)}catch(e){console.error(e),n("Upload error: "+e.message)}}async function uploadTemplate(e){let t=e.target.files&&e.target.files[0];if(!t)return;let s=new FormData;s.append("file",t);try{let e=await (0,u.S)("/api/settings/receipts/upload-logo",{method:"POST",body:s});if(!e.ok)throw Error("Upload failed");let t=await e.json();t&&t.url&&a(t.url)}catch(e){console.error(e),n("Upload error: "+e.message)}}return(0,p.useEffect)(()=>{(async()=>{try{let e=await (0,u.S)("/api/settings/receipts");if(!e.ok)return;let s=await e.json();t(s.receipt_logo_url||""),a(s.receipt_template_url||""),l(s.receipt_center_phone||"")}catch(e){console.error(e)}})()},[]),(0,d.jsxs)("div",{className:"p-4 max-w-2xl",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Settings"}),d.jsx("p",{className:"mb-4",children:"Configure system-wide settings such as receipt header/logo and contact phone."}),(0,d.jsxs)("form",{onSubmit:save,className:"grid gap-4 bg-white dark:bg-slate-800 dark:text-slate-100 p-4 rounded",children:[(0,d.jsxs)("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:"Receipt logo URL"}),(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[d.jsx("input",{value:e,onChange:e=>t(e.target.value),placeholder:"https://.../logo.png",className:"p-2 border rounded w-full"}),(0,d.jsxs)("label",{className:"p-2 bg-gray-100 border rounded cursor-pointer",children:["Upload",d.jsx("input",{type:"file",accept:"image/*",onChange:uploadFile,style:{display:"none"}})]})]}),e?d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:e,alt:"logo preview",style:{maxHeight:100}})}):d.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"No logo configured"})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:"Receipt template (background)"}),(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[d.jsx("input",{value:s,onChange:e=>a(e.target.value),placeholder:"https://.../template.png",className:"p-2 border rounded w-full"}),(0,d.jsxs)("label",{className:"p-2 bg-gray-100 border rounded cursor-pointer",children:["Upload",d.jsx("input",{type:"file",accept:"image/*",onChange:uploadTemplate,style:{display:"none"}})]})]}),s?d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:s,alt:"template preview",style:{maxHeight:120}})}):d.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"No template configured"})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:"Center phone"}),d.jsx("input",{value:r,onChange:e=>l(e.target.value),placeholder:"0123-456-789",className:"p-2 border rounded w-full"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("button",{type:"submit",disabled:o,className:"px-3 py-2 bg-green-600 text-white rounded",children:o?"Saving...":"Save settings"}),i&&d.jsx("div",{className:"text-sm",children:i})]})]}),(0,d.jsxs)("div",{className:"mt-6",children:[d.jsx("h2",{className:"text-lg font-medium mb-2",children:"Quick links"}),d.jsx("ul",{className:"list-disc ml-6 text-sm",children:d.jsx("li",{children:d.jsx("a",{href:"/settings/receipts",className:"text-blue-600",children:"Receipt settings page"})})})]})]})}let m=(0,i.l)(a,"default"),g=(0,i.l)(a,"getStaticProps"),x=(0,i.l)(a,"getStaticPaths"),h=(0,i.l)(a,"getServerSideProps"),f=(0,i.l)(a,"config"),b=(0,i.l)(a,"reportWebVitals"),j=(0,i.l)(a,"unstable_getStaticProps"),S=(0,i.l)(a,"unstable_getStaticPaths"),v=(0,i.l)(a,"unstable_getStaticParams"),_=(0,i.l)(a,"unstable_getServerProps"),y=(0,i.l)(a,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/settings",pathname:"/settings",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:a})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,199,209,450,181],()=>__webpack_exec__(8884));module.exports=s})();