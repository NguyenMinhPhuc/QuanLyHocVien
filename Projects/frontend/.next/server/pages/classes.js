"use strict";(()=>{var e={};e.id=178,e.ids=[178,888,660],e.modules={133:(e,t,s)=>{s.r(t),s.d(t,{config:()=>f,default:()=>p,getServerSideProps:()=>b,getStaticPaths:()=>g,getStaticProps:()=>j,reportWebVitals:()=>v,routeModule:()=>C,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>N});var a={};s.r(a),s.d(a,{default:()=>Classes});var r=s(7093),l=s(5244),i=s(1323),n=s(9209),d=s.n(n),o=s(181),c=s(997),u=s(6689),h=s(1163),m=s(6686),x=s(6893);function Classes(){let e=(0,h.useRouter)(),[t,s]=(0,u.useState)([]),[a,r]=(0,u.useState)(!1),[l,i]=(0,u.useState)(null),[n,d]=(0,u.useState)(!1),[o,p]=(0,u.useState)(null),[j,g]=(0,u.useState)({course_id:"",teacher_id:"",room:"",schedule:"",status:"active"}),[b,f]=(0,u.useState)(null),[v,N]=(0,u.useState)([]),[w,_]=(0,u.useState)([]),[y,S]=(0,u.useState)(!1),[C,k]=(0,u.useState)(!1),[L,P]=(0,u.useState)(!1),[E,A]=(0,u.useState)(null),[$,D]=(0,u.useState)({course_id:"",teacher_id:"",room:"",start_time:"",end_time:"",registration_open_date:"",registration_close_date:"",course_start_date:"",course_end_date:"",status:"active"}),[T,M]=(0,u.useState)([]),[O,R]=(0,u.useState)(""),[F,z]=(0,u.useState)("all"),[J,q]=(0,u.useState)("course_name"),[Y,V]=(0,u.useState)("asc"),[W,I]=(0,u.useState)(1),[K,U]=(0,u.useState)(10),[X,G]=(0,u.useState)([]),[B,H]=(0,u.useState)(""),[Q,Z]=(0,u.useState)({name:"",email:"",phone:""}),[ee,et]=(0,u.useState)([]),[es,ea]=(0,u.useState)(""),[er,el]=(0,u.useState)(""),[ei,en]=(0,u.useState)(""),[ed,eo]=(0,u.useState)(!1),[ec,eu]=(0,u.useState)(!1);async function load(){r(!0);try{let e=await (0,m.S)("/api/classes");if(!e.ok)throw Error("Failed to load classes");let t=await e.json();s(t)}catch(e){i(e.message)}finally{r(!1)}}async function handleManage(t){i(null);try{let s=await (0,m.S)(`/api/classes/${t.id}/enrollments/sync`,{method:"POST"});if(!s.ok){let e={};try{e=await s.json()}catch(t){e={error:await s.text().catch(()=>s.statusText)}}throw Error(e.error||`Failed to sync enrollments (status ${s.status})`)}e.push(`/class-students/${t.id}`)}catch(e){console.error("handleManage error",e),i(e.message||"Kh\xf4ng thể đồng bộ dữ liệu lớp")}}async function openCreateModal(e){i(null);try{let e=await (0,m.S)("/api/courses");e.ok&&M(await e.json());let t=await (0,m.S)("/api/teachers");t.ok&&et(await t.json())}catch(e){}if(e){let t=e.schedule&&e.schedule.includes(" - ")?e.schedule.split(" - ")[0]:"",s=e.schedule&&e.schedule.includes(" - ")?e.schedule.split(" - ")[1]:"",fmt=e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if("string"==typeof e&&e.includes("T"))return e.split("T")[0];try{let t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString().slice(0,10)}catch(e){}return""};D({course_id:e.course_id||"",teacher_id:e.teacher_id||"",room:e.room||"",start_time:t,end_time:s,registration_open_date:fmt(e.registration_open_date),registration_close_date:fmt(e.registration_close_date),course_start_date:fmt(e.course_start_date),course_end_date:fmt(e.course_end_date),status:e.status||"active"}),A(e.id)}else D({course_id:"",teacher_id:"",room:"",start_time:"",end_time:"",registration_open_date:"",registration_close_date:"",course_start_date:"",course_end_date:"",status:"active"}),A(null);P(!0)}async function submitCreateClass(e){e.preventDefault(),i(null);try{let e;let t={...$};($.start_time||$.end_time)&&(t.schedule=`${$.start_time||""}${$.start_time&&$.end_time?" - ":""}${$.end_time||""}`),delete t.start_time,delete t.end_time,e=E?await (0,m.S)(`/api/classes/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):await (0,m.S)("/api/classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let s=await e.json();if(!e.ok)throw Error(s.error||JSON.stringify(s));P(!1),A(null),await load()}catch(e){i(e.message)}}async function loadClassDetails(e){i(null);try{let[t,s,a]=await Promise.all([(0,m.S)(`/api/classes/${e.id}`),(0,m.S)(`/api/classes/${e.id}/students`),(0,m.S)(`/api/classes/${e.id}/teachers`)]);if(!t.ok)throw Error("Failed to fetch class");if(!s.ok)throw Error("Failed to fetch enrolled students");if(!a.ok)throw Error("Failed to fetch class teachers");let r=await t.json(),l=await s.json(),i=await a.json();f(r),N(l),_(i),d(!0)}catch(e){i(e.message)}}async function openAddStudent(e){i(null);try{let e=await (0,m.S)("/api/students");if(e.ok){let t=await e.json();G(t)}}catch(e){}H(""),Z({name:"",email:"",phone:""}),el(""),S(!0)}async function openAddTeacher(e){i(null);try{let e=await (0,m.S)("/api/teachers");if(e.ok){let t=await e.json();et(t)}}catch(e){}ea(""),en(""),k(!0)}async function handleAddStudent(e){e.preventDefault(),i(null);try{let e=await (0,m.S)(`/api/classes/${b.id}/students`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B?{student_id:B}:{student:Q})}),t=await e.json();if(!e.ok)throw Error(t.error||JSON.stringify(t));let s=await (0,m.S)(`/api/classes/${b.id}/students`);s.ok&&N(await s.json()),S(!1)}catch(e){i(e.message)}}async function removeStudentFromClass(e){if(confirm("Remove student from class?"))try{let t=await (0,m.S)(`/api/classes/${b.id}/students/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to remove")}let s=await (0,m.S)(`/api/classes/${b.id}/students`);s.ok&&N(await s.json())}catch(e){i(e.message)}}async function handleAddTeacher(e){e.preventDefault(),i(null);try{if(!es)return i("Please select a teacher");let e=await (0,m.S)(`/api/classes/${b.id}/teachers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:es})}),t=await e.json();if(!e.ok)throw Error(t.error||JSON.stringify(t));let s=await (0,m.S)(`/api/classes/${b.id}/teachers`);s.ok&&_(await s.json()),k(!1)}catch(e){i(e.message)}}async function removeTeacherFromClass(e){if(confirm("Remove teacher from class?"))try{let t=await (0,m.S)(`/api/classes/${b.id}/teachers/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to remove")}let s=await (0,m.S)(`/api/classes/${b.id}/teachers`);s.ok&&_(await s.json())}catch(e){i(e.message)}}async function removeClass(e){if(confirm("X\xe1c nhận x\xf3a lớp học?"))try{let t=await (0,m.S)(`/api/classes/${e}`,{method:"DELETE"}),s=await t.json();if(!t.ok)throw Error(s.error||JSON.stringify(s));await load()}catch(e){i(e.message)}}async function toggleClassStatus(e){let t="active"===e.status?"inactive":"active";try{r(!0);let a=await (0,m.S)(`/api/classes/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}),l=await a.json().catch(()=>({}));if(!a.ok)throw Error(l.error||"Failed to update status");s(s=>s.map(s=>s.id===e.id?{...s,status:t}:s))}catch(e){console.error("toggle status error",e),i("Kh\xf4ng thể thay đổi trạng th\xe1i lớp")}finally{r(!1)}}return(0,u.useEffect)(()=>{load()},[]),(0,u.useEffect)(()=>{I(1)},[O,F,J,Y,K]),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h1",{className:"text-2xl font-semibold inline-block bg-indigo-100 text-indigo-800 dark:bg-slate-700 dark:text-indigo-200 px-3 py-1 rounded",children:"Classes"}),c.jsx("div",{children:(0,c.jsxs)("button",{title:"New class",onClick:()=>openCreateModal(),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded hover:opacity-90",children:[c.jsx(x.OvN,{})," New"]})})]}),l&&c.jsx("div",{className:"mb-3 text-red-600",children:l}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded",children:a?c.jsx("div",{children:"Loading..."}):(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-3",children:[c.jsx("div",{className:"flex items-center gap-2 w-full md:w-1/2",children:c.jsx("input",{placeholder:"T\xecm kiếm lớp, kh\xf3a học, gi\xe1o vi\xean...",value:O,onChange:e=>R(e.target.value),className:"p-2 border rounded w-full"})}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsxs)("select",{value:F,onChange:e=>z(e.target.value),className:"p-2 border rounded",children:[c.jsx("option",{value:"all",children:"All statuses"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"inactive",children:"Inactive"})]}),(0,c.jsxs)("select",{value:K,onChange:e=>U(Number(e.target.value)),className:"p-2 border rounded",children:[c.jsx("option",{value:5,children:"5 / page"}),c.jsx("option",{value:10,children:"10 / page"}),c.jsx("option",{value:20,children:"20 / page"})]})]})]}),(0,c.jsxs)("table",{className:"min-w-full table-auto",children:[c.jsx("thead",{children:(0,c.jsxs)("tr",{className:"text-left",children:[c.jsx("th",{className:"p-2",children:"No."}),(0,c.jsxs)("th",{className:"p-2 cursor-pointer",onClick:()=>{"course_name"===J?V(e=>"asc"===e?"desc":"asc"):(q("course_name"),V("asc"))},children:["Course ","course_name"===J?"asc"===Y?"↑":"↓":""]}),c.jsx("th",{className:"p-2",children:"Students"}),c.jsx("th",{className:"p-2",children:"Reserved"}),c.jsx("th",{children:"Teacher(s)"}),c.jsx("th",{children:"Room"}),c.jsx("th",{children:"Schedule"}),c.jsx("th",{children:"Reg. Open"}),c.jsx("th",{children:"Start"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:(()=>{let e=(O||"").toLowerCase().trim(),s=Array.isArray(t)?t.slice():[];"all"!==F&&(s=s.filter(e=>(e.status||"").toLowerCase()===F)),e&&(s=s.filter(t=>{let s=(t.course_name||t.course||"").toString().toLowerCase(),a=(t.teacher_name||t.teacher||"").toString().toLowerCase(),r=(t.room||"").toString().toLowerCase();return s.includes(e)||a.includes(e)||r.includes(e)})),s.sort((e,t)=>{let s=(e[J]||"").toString().toLowerCase(),a=(t[J]||"").toString().toLowerCase();return s<a?"asc"===Y?-1:1:s>a?"asc"===Y?1:-1:0});let a=s.length,r=Math.max(1,Math.ceil(a/K)),l=(Math.min(Math.max(1,W),r)-1)*K,i=s.slice(l,l+K);return i.map((e,t)=>(0,c.jsxs)("tr",{className:"border-t",children:[c.jsx("td",{className:"p-2",children:l+t+1}),c.jsx("td",{className:"p-2",children:e.course_name||(e.course_id?e.course_id:e.course)}),c.jsx("td",{className:"p-2",children:void 0!==e.student_count?e.student_count:0}),c.jsx("td",{className:"p-2",children:void 0!==e.reserved_count?e.reserved_count:0}),c.jsx("td",{children:e.teacher_name||(e.teacher_id?e.teacher_id:e.teacher)}),c.jsx("td",{children:e.room}),c.jsx("td",{children:e.schedule}),c.jsx("td",{className:"p-2",children:e.registration_open_date?new Date(e.registration_open_date).toLocaleDateString():"—"}),c.jsx("td",{className:"p-2",children:e.course_start_date?new Date(e.course_start_date).toLocaleDateString():"—"}),c.jsx("td",{className:"p-2",children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:"active"===e.status,onChange:()=>toggleClassStatus(e)}),c.jsx("div",{className:`w-10 h-6 flex items-center bg-gray-300 rounded-full p-1 transition-colors ${"active"===e.status?"bg-green-500":"bg-gray-300"}`,children:c.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-md transform transition-transform ${"active"===e.status?"translate-x-4":""}`})})]}),c.jsx("span",{className:"text-sm",children:e.status})]})}),(0,c.jsxs)("td",{className:"p-2",children:[c.jsx("button",{title:"Manage",onClick:()=>handleManage(e),className:"mr-2 p-2 bg-sky-500 text-white rounded hover:opacity-90",children:c.jsx(x.WY8,{})}),c.jsx("button",{title:"View",onClick:()=>loadClassDetails(e),className:"mr-2 p-2 bg-blue-500 text-white rounded hover:opacity-90",children:c.jsx(x.rDJ,{})}),c.jsx("button",{title:"Edit",onClick:()=>openCreateModal(e),className:"mr-2 p-2 bg-yellow-500 text-white rounded hover:opacity-90",children:c.jsx(x.Nte,{})}),c.jsx("button",{title:"Delete",onClick:()=>removeClass(e.id),className:"p-2 bg-red-500 text-white rounded hover:opacity-90",children:c.jsx(x.Ybf,{})})]})]},e.id))})()})]}),(()=>{let e=(O||"").toLowerCase().trim(),s=Array.isArray(t)?t.slice():[];"all"!==F&&(s=s.filter(e=>(e.status||"").toLowerCase()===F)),e&&(s=s.filter(t=>{let s=(t.course_name||t.course||"").toString().toLowerCase(),a=(t.teacher_name||t.teacher||"").toString().toLowerCase(),r=(t.room||"").toString().toLowerCase();return s.includes(e)||a.includes(e)||r.includes(e)}));let a=s.length,r=Math.max(1,Math.ceil(a/K)),l=Math.min(Math.max(1,W),r);return(0,c.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,c.jsxs)("div",{className:"text-sm",children:["Showing ",(l-1)*K+1," - ",Math.min(l*K,a)," of ",a]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>I(e=>Math.max(1,e-1)),disabled:1===l,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Prev"}),c.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:r}).map((e,t)=>c.jsx("button",{onClick:()=>I(t+1),className:`px-2 py-1 border rounded ${l===t+1?"bg-slate-200":""}`,children:t+1},t))}),c.jsx("button",{onClick:()=>I(e=>Math.min(r,e+1)),disabled:l===r,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})})()]})}),n&&b&&(0,c.jsxs)("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black opacity-40",onClick:()=>d(!1)}),(0,c.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-3xl z-50",children:[c.jsx("h2",{className:"text-lg font-semibold mb-3 inline-block bg-indigo-100 text-indigo-800 dark:bg-slate-700 dark:text-indigo-200 px-3 py-1 rounded",children:"Class Details"}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Course:"})," ",b.course_name||b.course_id]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Teacher(s):"})," ",Array.isArray(w)&&w.length?w.map(e=>e.name).join(", "):"—"]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Room:"})," ",b.room]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Schedule:"})," ",b.schedule]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Registration open:"})," ",b.registration_open_date?new Date(b.registration_open_date).toLocaleDateString():"—"]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Registration close:"})," ",b.registration_close_date?new Date(b.registration_close_date).toLocaleDateString():"—"]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Course start:"})," ",b.course_start_date?new Date(b.course_start_date).toLocaleDateString():"—"]}),(0,c.jsxs)("div",{children:[c.jsx("strong",{children:"Course end:"})," ",b.course_end_date?new Date(b.course_end_date).toLocaleDateString():"—"]})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold",children:"Enrolled students"}),c.jsx("div",{children:c.jsx("button",{title:"Add student",onClick:()=>openAddStudent(b),className:"p-2 bg-green-600 text-white rounded hover:opacity-90",children:c.jsx(x.zy7,{})})})]}),(0,c.jsxs)("table",{className:"min-w-full table-auto mt-2",children:[c.jsx("thead",{children:(0,c.jsxs)("tr",{className:"text-left",children:[c.jsx("th",{className:"p-2",children:"No."}),c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Phone"}),c.jsx("th",{children:"Email"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:v.map((e,t)=>(0,c.jsxs)("tr",{className:"border-t",children:[c.jsx("td",{className:"p-2",children:t+1}),c.jsx("td",{className:"p-2",children:e.name}),c.jsx("td",{children:e.phone}),c.jsx("td",{children:e.email}),c.jsx("td",{className:"p-2",children:c.jsx("button",{title:"Remove student",onClick:()=>removeStudentFromClass(e.student_id),className:"p-2 bg-red-500 text-white rounded hover:opacity-90",children:c.jsx(x.Ybf,{})})})]},e.student_id))})]})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold",children:"Assigned teachers"}),c.jsx("div",{children:c.jsx("button",{title:"Add teacher",onClick:()=>openAddTeacher(b),className:"p-2 bg-indigo-600 text-white rounded hover:opacity-90",children:c.jsx(x.tMu,{})})})]}),(0,c.jsxs)("table",{className:"min-w-full table-auto mt-2",children:[c.jsx("thead",{children:(0,c.jsxs)("tr",{className:"text-left",children:[c.jsx("th",{className:"p-2",children:"No."}),c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Phone"}),c.jsx("th",{children:"Email"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:w.map((e,t)=>(0,c.jsxs)("tr",{className:"border-t",children:[c.jsx("td",{className:"p-2",children:t+1}),c.jsx("td",{className:"p-2",children:e.name}),c.jsx("td",{children:e.phone}),c.jsx("td",{children:e.email}),c.jsx("td",{className:"p-2",children:c.jsx("button",{title:"Remove teacher",onClick:()=>removeTeacherFromClass(e.teacher_id),className:"p-2 bg-red-500 text-white rounded hover:opacity-90",children:c.jsx(x.Ybf,{})})})]},e.teacher_id))})]})]}),c.jsx("div",{className:"flex justify-end gap-2 mt-4",children:c.jsx("button",{onClick:()=>d(!1),className:"px-3 py-2 border rounded",children:"Close"})})]})]}),L&&(0,c.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black opacity-40",onClick:()=>{P(!1),A(null)}}),(0,c.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-lg z-60",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:E?"Edit Class":"Create New Class"}),(0,c.jsxs)("form",{onSubmit:submitCreateClass,className:"grid grid-cols-1 gap-3",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Course"}),(0,c.jsxs)("select",{value:$.course_id,onChange:e=>D(t=>({...t,course_id:e.target.value})),className:"p-2 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- choose course --"}),T.map(e=>c.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Primary teacher (optional)"}),(0,c.jsxs)("select",{value:$.teacher_id,onChange:e=>D(t=>({...t,teacher_id:e.target.value})),className:"p-2 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- none --"}),ee.map(e=>c.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Room"}),c.jsx("input",{value:$.room,onChange:e=>D(t=>({...t,room:e.target.value})),className:"p-2 border rounded w-full"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start time"}),c.jsx("input",{type:"time",value:$.start_time,onChange:e=>D(t=>({...t,start_time:e.target.value})),className:"p-2 border rounded w-full"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"End time"}),c.jsx("input",{type:"time",value:$.end_time,onChange:e=>D(t=>({...t,end_time:e.target.value})),className:"p-2 border rounded w-full"})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration open"}),c.jsx("input",{type:"date",value:$.registration_open_date,onChange:e=>D(t=>({...t,registration_open_date:e.target.value})),className:"p-2 border rounded w-full"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration close"}),c.jsx("input",{type:"date",value:$.registration_close_date,onChange:e=>D(t=>({...t,registration_close_date:e.target.value})),className:"p-2 border rounded w-full"})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Course start"}),c.jsx("input",{type:"date",value:$.course_start_date,onChange:e=>D(t=>({...t,course_start_date:e.target.value})),className:"p-2 border rounded w-full"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Course end"}),c.jsx("input",{type:"date",value:$.course_end_date,onChange:e=>D(t=>({...t,course_end_date:e.target.value})),className:"p-2 border rounded w-full"})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[c.jsx("button",{type:"button",onClick:()=>{P(!1),A(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-3 py-2 bg-green-600 text-white rounded",children:"Create"})]})]})]})]}),y&&(0,c.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black opacity-40",onClick:()=>S(!1)}),(0,c.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-2xl z-60",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add student to class"}),(0,c.jsxs)("form",{onSubmit:handleAddStudent,className:"grid grid-cols-1 gap-3",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select existing student"}),(0,c.jsxs)("div",{className:"relative",children:[c.jsx("input",{placeholder:"Search or pick a student...",value:er,onChange:e=>{el(e.target.value),eo(!0)},onFocus:()=>eo(!0),className:"p-2 border rounded w-full"}),(0,c.jsxs)("div",{className:`absolute left-0 right-0 mt-1 bg-white dark:bg-slate-800 border rounded max-h-48 overflow-auto z-30 ${ed?"":"hidden"}`,children:[X.filter(e=>!v.some(t=>t.student_id===e.id)).filter(e=>(e.name||"").toLowerCase().includes(er.toLowerCase())||(e.email||"").toLowerCase().includes(er.toLowerCase())||(e.phone||"").toLowerCase().includes(er.toLowerCase())).map(e=>(0,c.jsxs)("div",{onMouseDown:()=>{H(String(e.id)),el(e.name||""),eo(!1)},className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 cursor-pointer",children:[c.jsx("div",{className:"font-medium",children:e.name}),c.jsx("div",{className:"text-sm text-slate-500",children:e.email||e.phone})]},e.id)),0===X.filter(e=>!v.some(t=>t.student_id===e.id)).filter(e=>(e.name||"").toLowerCase().includes(er.toLowerCase())||(e.email||"").toLowerCase().includes(er.toLowerCase())||(e.phone||"").toLowerCase().includes(er.toLowerCase())).length&&c.jsx("div",{className:"p-2 text-sm text-slate-500",children:"No results"})]})]})]}),(0,c.jsxs)("div",{className:"pt-2",children:[c.jsx("div",{className:"text-sm font-medium mb-1",children:"Or create new student"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[c.jsx("input",{placeholder:"Name",value:Q.name,onChange:e=>Z(t=>({...t,name:e.target.value})),className:"p-2 border rounded"}),c.jsx("input",{placeholder:"Email",value:Q.email,onChange:e=>Z(t=>({...t,email:e.target.value})),className:"p-2 border rounded"}),c.jsx("input",{placeholder:"Phone",value:Q.phone,onChange:e=>Z(t=>({...t,phone:e.target.value})),className:"p-2 border rounded"})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-3 py-2 border rounded",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-3 py-2 bg-green-600 text-white rounded",children:"Add"})]})]})]})]}),C&&(0,c.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black opacity-40",onClick:()=>k(!1)}),(0,c.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md z-60",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Assign teacher to class"}),(0,c.jsxs)("form",{onSubmit:handleAddTeacher,className:"grid grid-cols-1 gap-3",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select existing teacher"}),(0,c.jsxs)("div",{className:"relative",children:[c.jsx("input",{placeholder:"Search or pick a teacher...",value:ei,onChange:e=>{en(e.target.value),eu(!0)},onFocus:()=>eu(!0),className:"p-2 border rounded w-full"}),(0,c.jsxs)("div",{className:`absolute left-0 right-0 mt-1 bg-white dark:bg-slate-800 border rounded max-h-48 overflow-auto z-30 ${ec?"":"hidden"}`,children:[ee.filter(e=>!w.some(t=>t.teacher_id===e.id)).filter(e=>(e.name||"").toLowerCase().includes(ei.toLowerCase())||(e.email||"").toLowerCase().includes(ei.toLowerCase())||(e.phone||"").toLowerCase().includes(ei.toLowerCase())).map(e=>(0,c.jsxs)("div",{onMouseDown:()=>{ea(String(e.id)),en(e.name||""),eu(!1)},className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 cursor-pointer",children:[c.jsx("div",{className:"font-medium",children:e.name}),c.jsx("div",{className:"text-sm text-slate-500",children:e.email||e.phone})]},e.id)),0===ee.filter(e=>!w.some(t=>t.teacher_id===e.id)).filter(e=>(e.name||"").toLowerCase().includes(ei.toLowerCase())||(e.email||"").toLowerCase().includes(ei.toLowerCase())||(e.phone||"").toLowerCase().includes(ei.toLowerCase())).length&&c.jsx("div",{className:"p-2 text-sm text-slate-500",children:"No results"})]})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-3 py-2 border rounded",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Assign"})]})]})]})]})]})}let p=(0,i.l)(a,"default"),j=(0,i.l)(a,"getStaticProps"),g=(0,i.l)(a,"getStaticPaths"),b=(0,i.l)(a,"getServerSideProps"),f=(0,i.l)(a,"config"),v=(0,i.l)(a,"reportWebVitals"),N=(0,i.l)(a,"unstable_getStaticProps"),w=(0,i.l)(a,"unstable_getStaticPaths"),_=(0,i.l)(a,"unstable_getStaticParams"),y=(0,i.l)(a,"unstable_getServerProps"),S=(0,i.l)(a,"unstable_getServerSideProps"),C=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/classes",pathname:"/classes",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:a})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,199,209,450,181],()=>__webpack_exec__(133));module.exports=s})();