"use strict";(()=>{var e={};e.id=608,e.ids=[608,888,660],e.modules={5090:(e,t,a)=>{a.r(t),a.d(t,{config:()=>f,default:()=>g,getServerSideProps:()=>p,getStaticPaths:()=>b,getStaticProps:()=>m,reportWebVitals:()=>v,routeModule:()=>w,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>_});var r={};a.r(r),a.d(r,{default:()=>Darkboard});var s=a(7093),l=a(5244),d=a(1323),i=a(9209),n=a.n(i),o=a(181),c=a(997),x=a(6689),h=a(6686),u=a(5951);function Darkboard(){let[e,t]=(0,x.useState)(null),[a,r]=(0,x.useState)(!1),[s,l]=(0,x.useState)(null);async function load(){r(!0);try{let e=await (0,h.S)("/api/dashboard");if(!e.ok)throw Error("Failed to load");let a=await e.json();t(a)}catch(e){l(e.message)}finally{r(!1)}}function renderKPI(e,t,a){return(0,c.jsxs)("div",{className:"p-4 bg-gray-800/60 rounded-lg shadow-md border border-gray-700",children:[c.jsx("div",{className:"text-sm text-gray-300",children:e}),c.jsx("div",{className:"text-4xl font-extrabold text-white mt-2",children:t}),a&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:a})]})}return(0,x.useEffect)(()=>{load()},[]),c.jsx("div",{className:"min-h-screen p-6 bg-gradient-to-b from-gray-900 via-gray-900 to-gray-800 text-white",children:(0,c.jsxs)("div",{className:"max-w-6xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold mb-4",children:(0,u.t)("darkboard.title","Darkboard — B\xe1o c\xe1o")}),s&&c.jsx("div",{className:"text-red-400 mb-2",children:s}),a&&c.jsx("div",{className:"text-gray-300",children:(0,u.t)("actions.loading","Đang tải...")}),e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[renderKPI((0,u.t)("dashboard.total_students","Tổng học vi\xean"),e.totalStudents,(0,u.t)("dashboard.students_label","Tổng học vi\xean")),renderKPI((0,u.t)("dashboard.total_teachers","Tổng gi\xe1o vi\xean"),e.totalTeachers),renderKPI((0,u.t)("dashboard.total_classes","Tổng lớp"),e.totalClasses,`${(0,u.t)("dashboard.active","Hoạt động")}: ${e.activeClasses}`),renderKPI((0,u.t)("dashboard.schedules","Lịch (sắp tới)"),e.upcomingSessions,`${(0,u.t)("dashboard.total_schedules","Tổng lịch")}: ${e.totalSchedules}`)]}),(0,c.jsxs)("div",{className:"mt-8 p-6 bg-gray-800/60 rounded-lg border border-gray-700",children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:(0,u.t)("dashboard.top_classes","Lớp đ\xf4ng nhất")}),c.jsx(function({items:e}){if(!e||0===e.length)return c.jsx("div",{className:"text-gray-300",children:(0,u.t)("dashboard.no_data","Kh\xf4ng c\xf3 dữ liệu")});let t=Math.max(...e.map(e=>e.student_count||0),1);return c.jsx("div",{className:"mt-4 overflow-auto",children:c.jsx("svg",{width:Math.min(600,220*e.length),height:48*e.length,viewBox:`0 0 ${Math.min(600,220*e.length)} ${48*e.length}`,children:e.map((e,a)=>{let r=Math.round((e.student_count||0)/t*400);return(0,c.jsxs)("g",{transform:`translate(0, ${48*a+6})`,children:[c.jsx("text",{x:8,y:18,fill:"#e5e7eb",fontSize:"12",children:e.course_name||"Class "+e.id}),c.jsx("rect",{x:200,y:2,rx:6,ry:6,width:Math.max(8,r),height:36,fill:"#60a5fa"}),c.jsx("text",{x:200+Math.max(8,r)+8,y:18,fill:"#d1d5db",fontSize:"12",children:e.student_count||0}),c.jsx("text",{x:8,y:36,fill:"#9ca3af",fontSize:"10",children:e.teacher_name||""})]},e.id)})})})},{items:e.topClasses})]})]})]})})}let g=(0,d.l)(r,"default"),m=(0,d.l)(r,"getStaticProps"),b=(0,d.l)(r,"getStaticPaths"),p=(0,d.l)(r,"getServerSideProps"),f=(0,d.l)(r,"config"),v=(0,d.l)(r,"reportWebVitals"),_=(0,d.l)(r,"unstable_getStaticProps"),S=(0,d.l)(r,"unstable_getStaticPaths"),j=(0,d.l)(r,"unstable_getStaticParams"),P=(0,d.l)(r,"unstable_getServerProps"),y=(0,d.l)(r,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/darkboard",pathname:"/darkboard",bundlePath:"",filename:""},components:{App:o.default,Document:n()},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[761,199,209,450,181],()=>__webpack_exec__(5090));module.exports=a})();